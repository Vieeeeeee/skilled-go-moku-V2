<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no" />
    <title>技能五子棋</title>
<style>
  :root {
    --app-gradient: linear-gradient(135deg, #1a237e 0%, #283593 25%, #1a237e 50%, #0d47a1 75%, #1a237e 100%);
  }

  /* Mobile Optimization - Global */
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    touch-action: manipulation;
    min-height: 100%;
    background: var(--app-gradient);
    background-size: 400% 400%;
    animation: gradient-shift 15s ease infinite;
  }
  
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Performance optimization */
  .flipper, .skill-animation-overlay, video {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  /* Prevent pull-to-refresh on mobile only */
  @media (max-width: 768px) {
    body {
      overscroll-behavior: none;
      position: fixed;
      width: 100%;
      height: 100%;
      overflow: hidden;
      /* Ensure background is visible on mobile */
      background: var(--app-gradient) !important;
      background-size: 400% 400% !important;
      animation: gradient-shift 15s ease infinite !important;
    }

    #root {
      height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-y: contain;
      background: transparent !important;
    }
    
    #root > div {
      overflow-x: hidden;
      background: transparent;
      min-height: 100%;
    }
  }
  
  /* Desktop - ensure scrolling works */
  @media (min-width: 769px) {
    body {
      overflow-y: auto;
    }
  }
  
  /* Background gradient animation - needed for mobile */
  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Allow text selection for important content */
  input, textarea, [contenteditable] {
    -webkit-user-select: text;
    user-select: text;
  }
  
  /* Smooth scrolling on iOS */
  .mobile-skills-list {
    -webkit-overflow-scrolling: touch;
  }
  
  .perspective-container {
    perspective: 1500px;
  }
  .flipper {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: none;
  }
  .flipper.is-animating {
    transition: transform 1.2s;
  }
  .flipper.is-flipped {
    transform: rotateY(180deg);
  }
  .flipper-front, .flipper-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden; /* Safari */
    backface-visibility: hidden;
    border-radius: 1rem;
  }
  .flipper-back {
    background-size: cover;
    background-position: center;
    transform: rotateY(180deg);
  }
  
  /* Hand-drawn Board Effects */
  .hand-drawn-board {
    filter: drop-shadow(0 4px 8px rgba(76, 175, 80, 0.2));
  }
  
  .hand-drawn-grid {
    position: relative;
  }
  
  .hand-drawn-grid::before {
    content: '';
    position: absolute;
    inset: -1px;
    background: inherit;
    border: inherit;
    filter: blur(0.5px);
    opacity: 0.5;
  }
  
  /* Anime-style Pieces */
  .anime-piece {
    animation: piece-pop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
  }
  
  @keyframes piece-pop {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  .anime-piece:hover {
    transform: scale(1.05);
    filter: brightness(1.1);
  }

  @keyframes board-shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
  }
  .board-shake {
    animation: board-shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
  }
  
  @keyframes board-shake-intense {
    0%, 100% { transform: translate3d(0, 0, 0); }
    10%, 30%, 50%, 70%, 90% { transform: translate3d(-6px, 0, 0) rotate(-1deg); }
    20%, 40%, 60%, 80% { transform: translate3d(6px, 0, 0) rotate(1deg); }
  }
  .board-shake-intense {
    animation: board-shake-intense 1.2s cubic-bezier(.36,.07,.19,.97) both;
  }

  /* Danmaku Styling */
  .danmaku-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    z-index: 1;
  }
  .danmaku-item {
    position: absolute;
    right: 0;
    transform: translateX(100%);
    white-space: nowrap;
    font-size: 1.375rem;
    font-weight: bold;
    padding: 5px 14px;
    animation-name: scroll-left;
    animation-timing-function: linear;
    animation-fill-mode: forwards;
  }
  .danmaku-player { 
    color: #4FC3F7; 
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    background: rgba(79, 195, 247, 0.15);
    padding: 6px 14px;
    border-radius: 8px;
    border: 1px solid rgba(79, 195, 247, 0.3);
  }
  .danmaku-ai { 
    color: #FFC107; 
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    background: rgba(255, 193, 7, 0.2);
    padding: 6px 14px;
    border-radius: 8px;
    border: 1px solid rgba(255, 193, 7, 0.4);
    font-weight: 600;
  }
  .danmaku-narrator { 
    color: #FDD835; 
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    background: rgba(253, 216, 53, 0.15);
    padding: 6px 14px;
    border-radius: 8px;
    border: 1px solid rgba(253, 216, 53, 0.3);
  }

  @keyframes scroll-left {
    from { transform: translateX(100%); }
    to { transform: translateX(-120vw); }
  }
  /* End Danmaku */
  
  /* Mobile Landscape Layout */
  @media (max-width: 1023px) and (orientation: landscape) {
    .mobile-landscape-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    .skills-panel-mobile-scroll {
      max-height: calc(100vh - 4rem);
      overflow-y: auto;
    }
  }


  @keyframes celebration-lights {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  .celebration-active::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(125deg, #ff00ff, #00ffff, #ffff00, #00ff00, #ff00ff);
    background-size: 400% 400%;
    animation: celebration-lights 4s ease infinite;
    opacity: 0.25;
    z-index: 0;
    pointer-events: none;
  }

  @keyframes victory-flash {
    0%, 100% { box-shadow: 0 0 20px 5px rgba(255, 215, 0, 0.3), 0 0 10px 2px rgba(0, 255, 255, 0.2); }
    50% { box-shadow: 0 0 35px 15px rgba(255, 215, 0, 0.7), 0 0 20px 8px rgba(0, 255, 255, 0.5); }
  }
  .victory-animation {
    animation: victory-flash 1s ease-in-out infinite;
  }
  
  @keyframes piece-highlight {
    0%, 100% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.1); filter: brightness(1.5); }
  }
  .victory-piece-highlight {
     animation: piece-highlight 1.5s ease-in-out;
  }
  
  .text-glow-amber {
    text-shadow: 0 0 8px rgba(251, 191, 36, 0.7);
  }
  .text-glow-sky {
    text-shadow: 0 0 8px rgba(56, 189, 248, 0.7);
  }
  .text-glow-red {
    text-shadow: 0 0 8px rgba(239, 68, 68, 0.7);
  }
  
  /* Gomoku Piece Particle Effect */
  @keyframes particle-float {
    0% { transform: translateY(100vh) rotate(0deg) scale(1); opacity: 0; }
    10% { opacity: 0.8; }
    90% { opacity: 0.8; }
    100% { transform: translateY(-100vh) rotate(360deg) scale(1.2); opacity: 0; }
  }
  .particle-background {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
    background: transparent;
  }
  .particle {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    animation: particle-float linear infinite;
    opacity: 0;
  }
  .particle:nth-child(odd) {
    background: radial-gradient(circle, #000 40%, rgba(0,0,0,0.8) 70%, transparent);
    box-shadow: inset 2px 2px 3px rgba(255,255,255,0.3), 0 2px 4px rgba(0,0,0,0.5);
  }
  .particle:nth-child(even) {
    background: radial-gradient(circle, #fff 40%, rgba(255,255,255,0.9) 70%, transparent);
    box-shadow: inset 2px 2px 3px rgba(255,255,255,0.8), 0 2px 4px rgba(0,0,0,0.3);
  }
  
  /* Dramatic Energy Bar */
  @keyframes energy-pulse {
    0%, 100% { box-shadow: 0 0 10px rgba(251, 191, 36, 0.3); }
    50% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.8), inset 0 0 15px rgba(251, 191, 36, 0.3); }
  }
  .energy-bar {
    position: relative;
    background: linear-gradient(90deg, #1e293b 0%, #334155 100%);
    border: 2px solid #fbbf24;
    box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
    animation: energy-pulse 2s ease-in-out infinite;
  }
  .energy-fill {
    background: linear-gradient(90deg, #fbbf24, #f59e0b, #d97706);
    box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3), 0 0 10px rgba(251, 191, 36, 0.6);
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Skill Button Enhancement */
  @keyframes skill-ready-pulse {
    0%, 100% { box-shadow: 0 0 5px rgba(56, 189, 248, 0.3); }
    50% { box-shadow: 0 0 25px rgba(56, 189, 248, 0.8), inset 0 0 10px rgba(56, 189, 248, 0.3); }
  }
  .skill-ready {
    animation: skill-ready-pulse 1.5s ease-in-out infinite;
  }
  
  /* Epic Title Effect - Brush Calligraphy Style */
  @keyframes title-glow {
    0%, 100% { text-shadow: 0 0 8px rgba(251, 191, 36, 0.7), 0 0 15px rgba(251, 191, 36, 0.5), 0 0 30px rgba(251, 191, 36, 0.3); }
    50% { text-shadow: 0 0 15px rgba(251, 191, 36, 1), 0 0 30px rgba(251, 191, 36, 0.8), 0 0 50px rgba(251, 191, 36, 0.6); }
  }
  .epic-title {
    animation: title-glow 3s ease-in-out infinite;
    letter-spacing: 0.15em;
    font-size: 2.5rem;
    font-weight: 900;
    font-family: 'STKaiti', 'KaiTi', 'Microsoft YaHei', 'SimHei', 'Arial Black', sans-serif;
    -webkit-text-stroke: 2px rgba(0, 0, 0, 0.3);
    text-stroke: 2px rgba(0, 0, 0, 0.3);
    paint-order: stroke fill;
  }
  @media (max-width: 768px) {
    .epic-title {
      font-size: 1.8rem;
      letter-spacing: 0.1em;
    }
  }
  
  /* Music Button */
  @keyframes music-wave {
    0%, 100% { transform: scaleY(1); }
    50% { transform: scaleY(1.5); }
  }
  .music-wave span {
    display: inline-block;
    width: 3px;
    height: 15px;
    background: currentColor;
    margin: 0 1px;
    animation: music-wave 0.6s ease-in-out infinite;
  }
  .music-wave span:nth-child(2) { animation-delay: 0.1s; }
  .music-wave span:nth-child(3) { animation-delay: 0.2s; }
  .music-wave span:nth-child(4) { animation-delay: 0.3s; }
  
  /* Anime-style Header */
  .chuunibyou-header {
    position: relative;
    background: linear-gradient(135deg, rgba(66, 165, 245, 0.2) 0%, rgba(156, 39, 176, 0.3) 50%, rgba(66, 165, 245, 0.2) 100%);
    backdrop-filter: blur(10px);
    padding: 1rem 2rem;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 3px solid transparent;
    border-image: linear-gradient(90deg, #4FC3F7, #9C27B0, #4FC3F7) 1;
    box-shadow: 
      0 0 30px rgba(79, 195, 247, 0.4),
      0 0 60px rgba(156, 39, 176, 0.3),
      inset 0 2px 10px rgba(255, 255, 255, 0.2);
    clip-path: polygon(
      0 10px, 10px 0, 
      calc(100% - 10px) 0, 100% 10px,
      100% calc(100% - 10px), calc(100% - 10px) 100%,
      10px 100%, 0 calc(100% - 10px)
    );
  }
  .chuunibyou-header::before {
    content: '';
    position: absolute;
    top: -3px; left: -3px; right: -3px; bottom: -3px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(79, 195, 247, 0.6) 25%,
      rgba(156, 39, 176, 0.8) 50%,
      rgba(79, 195, 247, 0.6) 75%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: border-flow 3s linear infinite;
    clip-path: polygon(
      0 10px, 10px 0, 
      calc(100% - 10px) 0, 100% 10px,
      100% calc(100% - 10px), calc(100% - 10px) 100%,
      10px 100%, 0 calc(100% - 10px)
    );
    z-index: -1;
  }
  .chuunibyou-header::after {
    content: '';
    position: absolute;
    top: 5px; left: 5px; right: 5px; bottom: 5px;
    border: 1px solid rgba(79, 195, 247, 0.3);
    clip-path: polygon(
      0 8px, 8px 0, 
      calc(100% - 8px) 0, 100% 8px,
      100% calc(100% - 8px), calc(100% - 8px) 100%,
      8px 100%, 0 calc(100% - 8px)
    );
    pointer-events: none;
  }
  @keyframes border-flow {
    0% { background-position: 0% 0%; }
    100% { background-position: 200% 0%; }
  }
  .header-content {
    position: relative;
    z-index: 1;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .header-corner {
    position: absolute;
    width: 15px;
    height: 15px;
    border: 2px solid #4FC3F7;
    box-shadow: 0 0 8px #4FC3F7;
  }
  .header-corner.top-left {
    top: 3px; left: 3px;
    border-right: none; border-bottom: none;
  }
  .header-corner.top-right {
    top: 3px; right: 3px;
    border-left: none; border-bottom: none;
  }
  .header-corner.bottom-left {
    bottom: 3px; left: 3px;
    border-right: none; border-top: none;
  }
  .header-corner.bottom-right {
    bottom: 3px; right: 3px;
    border-left: none; border-top: none;
  }
  
  /* Enhanced Skill Particle Effects */
  @keyframes skill-particle-burst {
    0% { 
      transform: translate(0, 0) scale(1) rotate(0deg); 
      opacity: 1; 
    }
    50% {
      opacity: 1;
      transform: translate(calc(var(--tx) * 0.5), calc(var(--ty) * 0.5)) scale(1.5) rotate(180deg);
    }
    100% { 
      transform: translate(var(--tx), var(--ty)) scale(0) rotate(360deg); 
      opacity: 0; 
    }
  }
  .skill-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
  }
  .skill-particle {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--primary);
    box-shadow: 0 0 20px var(--primary), 0 0 40px var(--primary);
    animation: skill-particle-burst 1.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }
  
  /* Screen Flash Effect */
  @keyframes screen-flash {
    0% { opacity: 0; }
    10% { opacity: 0.9; }
    20% { opacity: 0.3; }
    30% { opacity: 0.8; }
    40% { opacity: 0.2; }
    50% { opacity: 0.6; }
    100% { opacity: 0; }
  }
  .screen-flash {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(circle at center, var(--primary) 0%, var(--secondary) 50%, transparent 80%);
    animation: screen-flash 0.8s ease-out;
    pointer-events: none;
    mix-blend-mode: screen;
  }
  
  /* Skill Animation Styles */
  .skill-animation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 999;
    overflow: hidden;
    pointer-events: auto;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Themes */
  .theme-remove { --primary: #ca8a04; --secondary: #fef08a; --bg-pattern: repeating-linear-gradient(45deg, rgba(40,40,40,0.8), rgba(40,40,40,0.8) 25px, rgba(20,20,20,0.8) 25px, rgba(20,20,20,0.8) 50px); }
  .theme-skip { --primary: #2563eb; --secondary: #93c5fd; --bg-pattern: repeating-linear-gradient(45deg, rgba(20,20,40,0.8), rgba(20,20,40,0.8) 25px, rgba(10,10,20,0.8) 25px, rgba(10,10,20,0.8) 50px); }
  .theme-swap { --primary: #9333ea; --secondary: #e9d5ff; --bg-pattern: repeating-linear-gradient(45deg, rgba(40,20,40,0.8), rgba(40,20,40,0.8) 25px, rgba(20,10,20,0.8) 25px, rgba(20,10,20,0.8) 50px); }
  .theme-tiaoChengLiShan { --primary: #16a34a; --secondary: #bbf7d0; --bg-pattern: repeating-linear-gradient(45deg, rgba(20,40,20,0.8), rgba(20,40,20,0.8) 25px, rgba(10,20,10,0.8) 25px, rgba(10,20,10,0.8) 50px); }
  .theme-qinNa { --primary: #e11d48; --secondary: #fecdd3; --bg-pattern: repeating-linear-gradient(45deg, rgba(40,20,20,0.8), rgba(40,20,20,0.8) 25px, rgba(20,10,10,0.8) 25px, rgba(20,10,10,0.8) 50px); }
  .theme-cleaning { 
    --primary: #06b6d4; 
    --secondary: #cffafe; 
    --bg-pattern: repeating-linear-gradient(45deg, rgba(20,40,45,0.8), rgba(20,40,45,0.8) 25px, rgba(10,20,25,0.8) 25px, rgba(10,20,25,0.8) 50px);
  }
  
  /* Cleaning Theme Special Effects */
  .theme-cleaning .skill-animation-bg::before {
    content: '🧹 💧 ✨ 🧼 💫 🧹 💧 ✨ 🧼 💫';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3rem;
    opacity: 0.15;
    white-space: nowrap;
    animation: cleaning-icons-float 3s ease-in-out infinite;
    pointer-events: none;
    letter-spacing: 40px;
  }
  
  .theme-cleaning .skill-animation-bg::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 30% 40%, rgba(6, 182, 212, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(103, 232, 249, 0.15) 0%, transparent 50%);
    animation: cleaning-glow-pulse 2s ease-in-out infinite;
  }
  
  @keyframes cleaning-icons-float {
    0%, 100% {
      transform: translate(-50%, -50%) scale(1) rotate(0deg);
      opacity: 0.15;
    }
    50% {
      transform: translate(-50%, -55%) scale(1.1) rotate(5deg);
      opacity: 0.25;
    }
  }
  
  @keyframes cleaning-glow-pulse {
    0%, 100% {
      opacity: 0.5;
      filter: blur(60px);
    }
    50% {
      opacity: 1;
      filter: blur(80px);
    }
  }
  /* Regular skill theme for 力拔山兮 */
  .theme-overwhelm { --primary: #f59e0b; --secondary: #fef3c7; --bg-pattern: repeating-linear-gradient(45deg, rgba(50,30,10,0.9), rgba(50,30,10,0.9) 25px, rgba(25,15,5,0.9) 25px, rgba(25,15,5,0.9) 50px); }

  /* AI Skill Animation Theme */
  .skill-animation-overlay.is-ai {
    --primary: #be185d; /* pink-700 */
    --secondary: #fce7f3; /* pink-100 */
    --bg-pattern: repeating-radial-gradient(circle at center, rgba(30,10,30,0.9), rgba(30,10,30,0.9) 10px, rgba(15,5,15,0.9) 10px, rgba(15,5,15,0.9) 20px);
  }

  .skill-animation-bg {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--bg-pattern);
    animation: skill-bg-pan 8s linear infinite, skill-fade-in-out 2.5s ease-in-out forwards, skill-bg-pulse 0.5s ease-in-out 3;
  }
  
  @keyframes skill-bg-pulse {
    0%, 100% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.05); filter: brightness(1.5); }
  }
  
  .skill-animation-char {
    width: 80vmin;
    height: 80vmin;
    background-size: cover;
    background-position: center;
    filter: contrast(200%) grayscale(100%) brightness(50%) invert(1);
    opacity: 0.6;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    animation: skill-char-reveal 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  }
  
  .skill-animation-text {
    position: absolute;
    bottom: 50%;
    font-size: 15vmin;
    font-weight: 900;
    color: var(--secondary);
    text-transform: uppercase;
    font-family: 'Impact', 'Arial Black', sans-serif;
    text-shadow: 
      0 0 20px var(--primary), 
      0 0 40px var(--primary), 
      0 0 60px var(--primary),
      -4px 4px 3px black,
      4px 4px 8px rgba(0,0,0,0.8);
    transform: translateY(50%) scale(4) skew(-20deg) rotate(-5deg);
    opacity: 0;
    animation: skill-text-reveal 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
    letter-spacing: 0.2em;
  }
  
  .skill-animation-quote {
    position: absolute;
    bottom: 15%;
    width: 95%;
    max-width: 1400px;
    margin: 0 auto;
    text-align: center;
    font-size: 4.5vmin;
    color: #fff;
    font-weight: 900;
    text-shadow: 
      0 0 10px black, 
      0 0 20px var(--primary), 
      0 0 30px var(--primary),
      3px 3px 6px black;
    overflow: hidden;
    line-height: 1.4;
  }
  
  .skill-animation-quote span {
    display: inline-block;
    white-space: nowrap;
  }
  
  .quote-part-1 {
    animation: slide-from-left 2.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    margin-right: 0.5em;
  }
  .quote-part-2 {
    font-size: 0.8em;
    opacity: 0.8;
    animation: slide-from-right 2.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  }


  @keyframes skill-fade-in-out {
    0%, 100% { opacity: 0; }
    10%, 90% { opacity: 1; }
  }

  @keyframes skill-bg-pan {
    from { background-position: 0% 0%; }
    to { background-position: 200% 200%; }
  }

  @keyframes skill-char-reveal {
    0% { transform: translateX(-100%) scale(1.2); clip-path: polygon(0 0, 0 0, 0 100%, 0 100%); }
    20% { transform: translateX(0) scale(1); clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
    80% { transform: translateX(0) scale(1); clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
    100% { transform: translateX(100%) scale(1.2); clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%); }
  }

  @keyframes skill-text-reveal {
    0% { 
      transform: translateY(50%) scale(4) skew(-20deg) rotate(-5deg); 
      opacity: 0; 
      filter: blur(20px);
    }
    15% { 
      transform: translateY(50%) scale(0.8) skew(-20deg) rotate(-5deg); 
      opacity: 0.5; 
      filter: blur(10px);
    }
    30% { 
      transform: translateY(50%) scale(1.3) skew(-20deg) rotate(-5deg); 
      opacity: 1; 
      filter: blur(0px);
    }
    40% { 
      transform: translateY(50%) scale(1) skew(-20deg) rotate(-5deg); 
      opacity: 1; 
      filter: blur(0px);
    }
    45% { 
      transform: translateY(50%) scale(1.05) skew(-18deg) rotate(-3deg); 
      opacity: 1; 
    }
    50% { 
      transform: translateY(50%) scale(1) skew(-20deg) rotate(-5deg); 
      opacity: 1; 
    }
    75% { 
      transform: translateY(50%) scale(1) skew(-20deg) rotate(-5deg); 
      opacity: 1; 
    }
    85% { 
      transform: translateY(50%) scale(1.2) skew(-22deg) rotate(-7deg); 
      opacity: 0.8; 
    }
    100% { 
      transform: translateY(50%) scale(5) skew(-25deg) rotate(-10deg); 
      opacity: 0; 
      filter: blur(30px);
    }
  }

  @keyframes slide-from-left {
    0% { transform: translateX(-110%); }
    20% { transform: translateX(-110%); }
    45% { transform: translateX(0); }
    80% { transform: translateX(0); }
    100% { transform: translateX(-110%); }
  }

  @keyframes slide-from-right {
    0% { transform: translateX(110%); }
    20% { transform: translateX(110%); }
    45% { transform: translateX(0); }
    80% { transform: translateX(0); }
    100% { transform: translateX(110%); }
  }

  /* Cleaning Effect Animation - Enhanced */
  .cleaning-effect {
    animation: cleaning-sweep 0.8s ease-out forwards;
    position: relative;
  }
  
  .cleaning-effect::before {
    content: '🧹';
    position: absolute;
    font-size: 2.5rem;
    top: 50%;
    left: -30%;
    transform: translate(-50%, -50%) rotate(-30deg);
    animation: broom-sweep 0.8s ease-out forwards;
    z-index: 100;
    pointer-events: none;
  }
  
  .cleaning-effect::after {
    content: '✨';
    position: absolute;
    font-size: 2rem;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: sparkle-burst 0.8s ease-out forwards;
    z-index: 99;
    pointer-events: none;
  }
  
  @keyframes cleaning-sweep {
    0% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
    50% {
      transform: scale(1.2) rotate(180deg);
      opacity: 0.5;
    }
    100% {
      transform: scale(0) rotate(360deg);
      opacity: 0;
    }
  }
  
  @keyframes broom-sweep {
    0% {
      left: -30%;
      transform: translate(-50%, -50%) rotate(-30deg);
      opacity: 1;
    }
    50% {
      left: 50%;
      transform: translate(-50%, -50%) rotate(20deg);
      opacity: 1;
    }
    100% {
      left: 130%;
      transform: translate(-50%, -50%) rotate(60deg);
      opacity: 0;
    }
  }
  
  @keyframes sparkle-burst {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 0;
    }
    30% {
      transform: translate(-50%, -50%) scale(2);
      opacity: 1;
    }
    60% {
      transform: translate(-50%, -50%) scale(3) rotate(180deg);
      opacity: 0.8;
    }
    100% {
      transform: translate(-50%, -50%) scale(5) rotate(360deg);
      opacity: 0;
    }
  }

  /* Process Video Animation - Top Right Corner */
  .process-video-container {
    animation: slide-in-right 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  
  @keyframes slide-in-right {
    0% {
      transform: translateX(150%) scale(0.8);
      opacity: 0;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }
  
  /* Victory Video Overlay Animation - Center */
  .victory-video-overlay {
    animation: overlay-fade-in 0.5s ease-out forwards;
  }
  
  .victory-video-player {
    width: 50vw;
    max-width: 960px;
    min-width: 600px;
    animation: victory-zoom-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .victory-celebration {
    position: relative;
    width: 50vw;
    max-width: 960px;
    min-width: 600px;
    aspect-ratio: 16 / 9;
    border-radius: 24px;
    overflow: hidden;
    border: 3px solid rgba(255, 215, 0, 0.85);
    background:
      radial-gradient(circle at 50% 15%, rgba(255, 255, 255, 0.25), transparent 60%),
      radial-gradient(circle at 15% 85%, rgba(255, 182, 193, 0.35), transparent 65%),
      radial-gradient(circle at 85% 70%, rgba(147, 112, 219, 0.4), transparent 70%),
      linear-gradient(135deg, rgba(255, 111, 145, 0.85), rgba(72, 61, 139, 0.9));
    box-shadow:
      0 0 45px rgba(255, 215, 0, 0.55),
      0 0 90px rgba(138, 43, 226, 0.45);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    color: #fff9e8;
    text-align: center;
    animation: victory-aurora 8s ease-in-out infinite alternate;
  }

  .victory-celebration::before,
  .victory-celebration::after {
    content: '';
    position: absolute;
    inset: -30%;
    pointer-events: none;
    z-index: 0;
    background-repeat: no-repeat;
  }

  .victory-celebration::before {
    background-image:
      radial-gradient(2px 2px at 10% 20%, rgba(255, 215, 0, 0.9), transparent),
      radial-gradient(3px 3px at 80% 25%, rgba(255, 105, 180, 0.8), transparent),
      radial-gradient(2px 2px at 35% 80%, rgba(135, 206, 250, 0.85), transparent),
      radial-gradient(4px 4px at 65% 60%, rgba(186, 85, 211, 0.75), transparent);
    animation: victory-sparkle 6s linear infinite;
    opacity: 0.7;
  }

  .victory-celebration::after {
    background-image:
      linear-gradient(120deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 60%),
      linear-gradient(-120deg, rgba(255, 255, 255, 0.15) 10%, rgba(255, 255, 255, 0) 70%);
    animation: victory-shine 4s ease-in-out infinite;
    opacity: 0.35;
  }

  .victory-celebration-glow,
  .victory-celebration-rings {
    position: absolute;
    inset: -15%;
    border-radius: 50%;
    pointer-events: none;
    z-index: 0;
  }

  .victory-celebration-glow {
    background: radial-gradient(circle, rgba(255, 215, 0, 0.5), transparent 70%);
    filter: blur(20px);
    animation: victory-glow-pulse 5s ease-in-out infinite;
    opacity: 0.65;
  }

  .victory-celebration-rings {
    background: conic-gradient(from 0deg, rgba(255, 215, 0, 0.4), rgba(138, 43, 226, 0.4), rgba(255, 105, 180, 0.45), rgba(255, 215, 0, 0.4));
    mix-blend-mode: screen;
    animation: victory-rings-spin 12s linear infinite;
    opacity: 0.5;
  }

  .victory-celebration-title,
  .victory-celebration-subtitle,
  .victory-celebration-badge {
    position: relative;
    z-index: 1;
  }

  .victory-celebration-title {
    font-size: clamp(2.4rem, 4.2vw, 3.6rem);
    font-weight: 900;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    text-shadow:
      0 0 25px rgba(255, 215, 0, 0.9),
      0 0 45px rgba(255, 105, 180, 0.7);
    animation: victory-title-glow 3.5s ease-in-out infinite;
  }

  .victory-celebration-subtitle {
    font-size: clamp(1.1rem, 2vw, 1.6rem);
    font-weight: 600;
    letter-spacing: 0.1em;
    background: rgba(15, 23, 42, 0.45);
    padding: 1rem 2.5rem;
    border-radius: 9999px;
    border: 2px solid rgba(255, 215, 0, 0.5);
    box-shadow:
      0 0 25px rgba(255, 215, 0, 0.35),
      inset 0 0 15px rgba(255, 215, 0, 0.2);
    animation: victory-subtitle-float 4s ease-in-out infinite;
  }

  .victory-celebration-badge {
    font-size: clamp(1.4rem, 2.4vw, 2rem);
    font-weight: 800;
    letter-spacing: 0.15em;
    padding: 0.75rem 2.5rem;
    border-radius: 9999px;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(255, 105, 180, 0.85));
    color: #2d1b69;
    box-shadow:
      0 0 35px rgba(255, 215, 0, 0.7),
      0 0 65px rgba(255, 105, 180, 0.6);
    animation: victory-badge-pulse 2.8s ease-in-out infinite;
  }

  @keyframes overlay-fade-in {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
  
  @keyframes victory-zoom-in {
    0% {
      transform: scale(0.5) rotate(-5deg);
      opacity: 0;
    }
    60% {
      transform: scale(1.05) rotate(2deg);
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
  }

  @keyframes victory-aurora {
    0% {
      background-position: 0% 50%, 0% 50%, 0% 50%, 0% 50%;
    }
    100% {
      background-position: 100% 50%, 100% 50%, 100% 50%, 100% 50%;
    }
  }

  @keyframes victory-sparkle {
    0% {
      transform: translate3d(0, 0, 0) rotate(0deg);
    }
    50% {
      transform: translate3d(-2%, -3%, 0) rotate(180deg);
    }
    100% {
      transform: translate3d(1%, 2%, 0) rotate(360deg);
    }
  }

  @keyframes victory-shine {
    0% {
      transform: translateX(-20%);
    }
    50% {
      transform: translateX(10%);
    }
    100% {
      transform: translateX(-15%);
    }
  }

  @keyframes victory-glow-pulse {
    0%, 100% {
      opacity: 0.55;
      transform: scale(0.95);
    }
    50% {
      opacity: 0.85;
      transform: scale(1.05);
    }
  }

  @keyframes victory-rings-spin {
    from {
      transform: rotate(0deg) scale(0.95);
    }
    to {
      transform: rotate(360deg) scale(1.05);
    }
  }

  @keyframes victory-title-glow {
    0%, 100% {
      text-shadow:
        0 0 20px rgba(255, 215, 0, 0.9),
        0 0 35px rgba(255, 105, 180, 0.7);
    }
    50% {
      text-shadow:
        0 0 35px rgba(255, 215, 0, 1),
        0 0 60px rgba(147, 112, 219, 0.85);
    }
  }

  @keyframes victory-subtitle-float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-6px);
    }
  }

  @keyframes victory-badge-pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow:
        0 0 25px rgba(255, 215, 0, 0.6),
        0 0 45px rgba(255, 105, 180, 0.5);
    }
    50% {
      transform: scale(1.07);
      box-shadow:
        0 0 45px rgba(255, 215, 0, 0.9),
        0 0 75px rgba(138, 43, 226, 0.6);
    }
  }

  /* Victory Scroll Text - Chuunibyou Style */
  .victory-scroll-container {
    width: 50vw;
    max-width: 960px;
    min-width: 600px;
    height: 100px;
    overflow: hidden;
    position: relative;
    background: linear-gradient(90deg, 
      rgba(139, 69, 19, 0.3) 0%,
      rgba(255, 215, 0, 0.2) 25%,
      rgba(255, 105, 180, 0.2) 50%,
      rgba(138, 43, 226, 0.2) 75%,
      rgba(139, 69, 19, 0.3) 100%
    );
    border: 2px solid rgba(255, 215, 0, 0.5);
    border-radius: 12px;
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.4),
                inset 0 0 20px rgba(255, 215, 0, 0.2);
    animation: victory-container-pulse 2s ease-in-out infinite;
    display: flex;
    align-items: center;
    padding: 0;
  }
  
  .victory-scroll-text {
    font-size: 2.5rem;
    font-weight: 900;
    white-space: nowrap;
    background: linear-gradient(90deg,
      #FFD700 0%,
      #FF6B9D 15%,
      #FF1493 30%,
      #8B008B 45%,
      #4B0082 60%,
      #00CED1 75%,
      #FFD700 90%,
      #FF6B9D 100%
    );
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 10px rgba(255, 215, 0, 1))
            drop-shadow(0 0 20px rgba(255, 105, 180, 0.8))
            drop-shadow(0 0 30px rgba(138, 43, 226, 0.6));
    letter-spacing: 0.15em;
    animation: victory-scroll 3s linear infinite,
               victory-text-glow 3s ease-in-out infinite,
               victory-gradient-shift 4s linear infinite;
    line-height: 1.2;
    padding: 10px 0;
  }
  
  @keyframes victory-scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }
  
  @keyframes victory-container-pulse {
    0%, 100% {
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.4),
                  inset 0 0 20px rgba(255, 215, 0, 0.2);
      border-color: rgba(255, 215, 0, 0.5);
    }
    50% {
      box-shadow: 0 0 50px rgba(255, 105, 180, 0.6),
                  inset 0 0 30px rgba(255, 105, 180, 0.3);
      border-color: rgba(255, 105, 180, 0.8);
    }
  }
  
  @keyframes victory-text-glow {
    0%, 100% {
      filter: drop-shadow(0 0 10px rgba(255, 215, 0, 1))
              drop-shadow(0 0 20px rgba(255, 105, 180, 0.8))
              drop-shadow(0 0 30px rgba(138, 43, 226, 0.6));
    }
    50% {
      filter: drop-shadow(0 0 20px rgba(255, 215, 0, 1))
              drop-shadow(0 0 40px rgba(255, 105, 180, 1))
              drop-shadow(0 0 60px rgba(138, 43, 226, 0.8));
    }
  }
  
  @keyframes victory-gradient-shift {
    0% {
      background-position: 0% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  /* Player/AI Indicator Badge */
  .skill-user-badge {
    position: absolute;
    top: 5%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 3vmin;
    font-weight: 900;
    color: #FFD700;
    text-shadow: 
      0 0 20px rgba(0, 0, 0, 1),
      0 0 30px rgba(0, 0, 0, 0.9),
      0 0 10px #FFD700,
      3px 3px 10px #000,
      -3px -3px 10px #000;
    background: linear-gradient(90deg, 
      rgba(139, 0, 139, 0.8) 0%, 
      rgba(255, 20, 147, 0.8) 50%, 
      rgba(139, 0, 139, 0.8) 100%
    );
    padding: 0.8rem 2rem;
    border-radius: 50px;
    border: 3px solid #FFD700;
    box-shadow: 
      0 0 20px rgba(255, 215, 0, 0.6),
      0 0 40px rgba(255, 20, 147, 0.4),
      inset 0 0 20px rgba(0, 0, 0, 0.5);
    animation: badge-float 2s ease-in-out infinite;
    z-index: 100;
    white-space: nowrap;
    backdrop-filter: blur(5px);
  }
  
  .is-ai .skill-user-badge {
    background: linear-gradient(90deg, 
      rgba(220, 20, 60, 0.8) 0%, 
      rgba(255, 69, 0, 0.8) 50%, 
      rgba(220, 20, 60, 0.8) 100%
    );
    border-color: #FF4500;
    box-shadow: 
      0 0 20px rgba(255, 69, 0, 0.6),
      0 0 40px rgba(220, 20, 60, 0.4),
      inset 0 0 20px rgba(0, 0, 0, 0.5);
  }
  
  @keyframes badge-float {
    0%, 100% {
      transform: translateX(-50%) translateY(0);
    }
    50% {
      transform: translateX(-50%) translateY(-10px);
    }
  }

  /* Ultimate Skill - Most Explosive Theme (for 终极奥义) */
  .theme-ultimate {
    background: 
      radial-gradient(circle at 30% 20%, rgba(255, 0, 255, 0.4) 0%, transparent 50%),
      radial-gradient(circle at 70% 80%, rgba(255, 215, 0, 0.4) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.3) 0%, transparent 70%),
      linear-gradient(45deg, 
        #8B008B 0%, 
        #FF1493 15%, 
        #FF4500 30%, 
        #FFD700 45%,
        #00CED1 60%,
        #8A2BE2 75%,
        #FF0000 90%,
        #8B008B 100%
      );
    background-size: 200% 200%, 200% 200%, 150% 150%, 400% 400%;
    animation: ultimate-bg-explosion 1.125s ease-in-out forwards;
  }
  
  .theme-ultimate .skill-animation-text {
    font-size: 15vmin !important;
    font-weight: 1000 !important;
    color: #FFD700 !important;
    text-shadow: 
      0 0 30px rgba(0, 0, 0, 1),
      0 0 40px rgba(0, 0, 0, 0.9),
      0 0 50px rgba(0, 0, 0, 0.8),
      0 0 10px #FFD700,
      0 0 20px #FF1493,
      0 0 30px #FFD700,
      5px 5px 20px #000,
      -5px -5px 20px #000 !important;
    animation: ultimate-text-stable 1.875s cubic-bezier(0.2, 0.8, 0.2, 1) forwards !important;
    letter-spacing: 0.3em !important;
    filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.9));
  }
  
  .theme-ultimate .skill-animation-quote {
    font-size: 6vmin !important;
    font-weight: 900 !important;
    color: #FFD700 !important;
    text-shadow: 
      0 0 30px rgba(0, 0, 0, 1),
      0 0 40px rgba(0, 0, 0, 0.9),
      0 0 10px #FFD700,
      0 0 20px #FF1493,
      3px 3px 15px #000,
      -3px -3px 15px #000 !important;
    animation: ultimate-quote-stable 1.875s cubic-bezier(0.2, 0.8, 0.2, 1) forwards !important;
    filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.9));
  }
  
  .theme-ultimate .screen-flash {
    animation: ultimate-flash 1.875s ease-out forwards !important;
  }
  
  .theme-ultimate .skill-particle {
    width: 20px !important;
    height: 20px !important;
    box-shadow: 
      0 0 20px currentColor,
      0 0 40px currentColor,
      0 0 60px currentColor !important;
    animation: ultimate-particle-burst 1.125s ease-out forwards !important;
  }

  /* Overwhelm Skill - Direct Victory Theme (for 力拔山兮) */
  /* Ultimate skill - explosive background */
  .theme-ultimate {
    background: 
      radial-gradient(circle at 30% 20%, rgba(255, 0, 255, 0.4) 0%, transparent 50%),
      radial-gradient(circle at 70% 80%, rgba(255, 215, 0, 0.4) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.3) 0%, transparent 70%),
      linear-gradient(45deg, 
        #8B008B 0%, 
        #FF1493 15%, 
        #FF4500 30%, 
        #FFD700 45%,
        #00CED1 60%,
        #8A2BE2 75%,
        #FF0000 90%,
        #8B008B 100%
      );
    background-size: 200% 200%, 200% 200%, 150% 150%, 400% 400%;
    animation: ultimate-bg-explosion 1.125s ease-in-out forwards;
  }
  
  @keyframes ultimate-bg-explosion {
    0% { 
      background-position: 0% 0%, 100% 100%, 50% 50%, 0% 0%;
      filter: brightness(1) contrast(1) saturate(1);
    }
    25% {
      background-position: 100% 100%, 0% 0%, 0% 0%, 50% 50%;
      filter: brightness(2) contrast(2) saturate(3);
    }
    50% {
      background-position: 50% 50%, 50% 50%, 100% 100%, 100% 100%;
      filter: brightness(3) contrast(3) saturate(5);
    }
    75% {
      background-position: 0% 100%, 100% 0%, 50% 50%, 150% 150%;
      filter: brightness(2.5) contrast(2.5) saturate(4);
    }
    100% { 
      background-position: 100% 0%, 0% 100%, 0% 0%, 200% 200%;
      filter: brightness(2) contrast(2) saturate(3);
    }
  }
  
  @keyframes ultimate-shake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    10% { transform: translate(-5px, 5px) rotate(-1deg); }
    20% { transform: translate(5px, -5px) rotate(1deg); }
    30% { transform: translate(-5px, -5px) rotate(-1deg); }
    40% { transform: translate(5px, 5px) rotate(1deg); }
    50% { transform: translate(-5px, 5px) rotate(-1deg); }
    60% { transform: translate(5px, -5px) rotate(1deg); }
    70% { transform: translate(-5px, -5px) rotate(-1deg); }
    80% { transform: translate(5px, 5px) rotate(1deg); }
    90% { transform: translate(-5px, 5px) rotate(-1deg); }
  }
  
  .theme-ultimate .skill-animation-text {
    font-size: 15vmin !important;
    font-weight: 1000 !important;
    color: #FFD700 !important;
    text-shadow: 
      0 0 30px rgba(0, 0, 0, 1),
      0 0 40px rgba(0, 0, 0, 0.9),
      0 0 50px rgba(0, 0, 0, 0.8),
      0 0 10px #FFD700,
      0 0 20px #FF1493,
      0 0 30px #FFD700,
      5px 5px 20px #000,
      -5px -5px 20px #000 !important;
    animation: ultimate-text-stable 1.875s cubic-bezier(0.2, 0.8, 0.2, 1) forwards !important;
    letter-spacing: 0.3em !important;
    filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.9));
  }
  
  @keyframes ultimate-text-stable {
    0% { 
      transform: scale(0) translateY(100%); 
      opacity: 0;
      filter: blur(20px);
    }
    40% {
      transform: scale(1.3) translateY(0);
      opacity: 1;
      filter: blur(0px);
    }
    60% {
      transform: scale(1.4) translateY(0);
      opacity: 1;
      filter: blur(0px);
    }
    100% { 
      transform: scale(1.5) translateY(0); 
      opacity: 1;
      filter: blur(0px);
    }
  }
  
  @keyframes ultimate-text-explosion {
    0% { 
      transform: scale(0) rotate(-360deg) translateY(100%); 
      opacity: 0;
      filter: blur(50px) brightness(0);
    }
    30% {
      transform: scale(2) rotate(0deg) translateY(-20%);
      opacity: 1;
      filter: blur(5px) brightness(3);
    }
    50% {
      transform: scale(1.5) rotate(10deg) translateY(0);
      opacity: 1;
      filter: blur(0px) brightness(2);
    }
    70% {
      transform: scale(1.8) rotate(-5deg) translateY(-10%);
      opacity: 1;
      filter: blur(2px) brightness(2.5);
    }
    100% { 
      transform: scale(1.5) rotate(0deg) translateY(0); 
      opacity: 1;
      filter: blur(0px) brightness(2);
    }
  }
  
  @keyframes ultimate-text-pulse {
    0%, 100% { 
      transform: scale(1) rotate(0deg);
      filter: drop-shadow(0 0 30px #FFD700);
    }
    50% { 
      transform: scale(1.1) rotate(2deg);
      filter: drop-shadow(0 0 50px #FF1493) drop-shadow(0 0 70px #FFD700);
    }
  }
  
  @keyframes ultimate-gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Ultimate Skill Score Display - Clear and Prominent */
  .skill-animation-score {
    position: absolute;
    top: 55%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10vmin;
    font-weight: 900;
    color: #FFD700;
    text-shadow: 
      0 0 40px rgba(0, 0, 0, 1),
      0 0 50px rgba(0, 0, 0, 0.9),
      0 0 60px rgba(0, 0, 0, 0.8),
      0 0 15px #FFD700,
      0 0 25px #FFD700,
      5px 5px 25px #000,
      -5px -5px 25px #000;
    animation: score-reveal-stable 1.875s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    z-index: 1000;
    white-space: nowrap;
    letter-spacing: 0.2em;
    filter: drop-shadow(0 0 25px rgba(0, 0, 0, 0.95));
    background: linear-gradient(180deg, #FFED4E 0%, #FFD700 50%, #FFA500 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  @keyframes score-reveal-stable {
    0% {
      transform: translateX(-50%) scale(0);
      opacity: 0;
      filter: blur(15px) drop-shadow(0 0 25px rgba(0, 0, 0, 0.95));
    }
    50% {
      transform: translateX(-50%) scale(1.3);
      opacity: 1;
      filter: blur(0px) drop-shadow(0 0 25px rgba(0, 0, 0, 0.95));
    }
    100% {
      transform: translateX(-50%) scale(1.2);
      opacity: 1;
      filter: blur(0px) drop-shadow(0 0 25px rgba(0, 0, 0, 0.95));
    }
  }
  
  @keyframes score-reveal {
    0% {
      transform: translateX(-50%) scale(0) rotate(360deg);
      opacity: 0;
      filter: blur(30px);
    }
    40% {
      transform: translateX(-50%) scale(1.8) rotate(0deg);
      opacity: 1;
      filter: blur(0px);
    }
    100% {
      transform: translateX(-50%) scale(1.5) rotate(0deg);
      opacity: 1;
      filter: blur(0px);
    }
  }
  
  @keyframes score-pulse {
    0%, 100% {
      text-shadow: 
        0 0 30px #FFD700,
        0 0 60px #FF1493,
        0 0 90px #FFD700,
        5px 5px 20px #000;
    }
    50% {
      text-shadow: 
        0 0 50px #FFD700,
        0 0 80px #FF1493,
        0 0 120px #FFD700,
        5px 5px 20px #000,
        0 0 150px #FFD700;
    }
  }
  
  .theme-ultimate .skill-animation-quote {
    font-size: 6vmin !important;
    font-weight: 900 !important;
    color: #FFD700 !important;
    text-shadow: 
      0 0 30px rgba(0, 0, 0, 1),
      0 0 40px rgba(0, 0, 0, 0.9),
      0 0 10px #FFD700,
      0 0 20px #FF1493,
      3px 3px 15px #000,
      -3px -3px 15px #000 !important;
    animation: ultimate-quote-stable 1.875s cubic-bezier(0.2, 0.8, 0.2, 1) forwards !important;
    filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.9));
  }
  
  @keyframes ultimate-quote-stable {
    0% { 
      transform: scale(0) translateY(-50%); 
      opacity: 0;
      filter: blur(15px) drop-shadow(0 0 15px rgba(0, 0, 0, 0.9));
    }
    50% {
      transform: scale(1.2) translateY(0);
      opacity: 1;
      filter: blur(0px) drop-shadow(0 0 15px rgba(0, 0, 0, 0.9));
    }
    100% { 
      transform: scale(1) translateY(0); 
      opacity: 1;
      filter: blur(0px) drop-shadow(0 0 15px rgba(0, 0, 0, 0.9));
    }
  }
  
  @keyframes ultimate-quote-reveal {
    0% { 
      transform: scale(0) translateY(-100%); 
      opacity: 0;
      filter: blur(30px);
    }
    50% {
      transform: scale(1.5) translateY(0);
      opacity: 1;
      filter: blur(0px);
    }
    100% { 
      transform: scale(1) translateY(0); 
      opacity: 1;
      filter: blur(0px);
    }
  }
  
  .theme-ultimate .screen-flash {
    animation: ultimate-flash 1.875s ease-out forwards !important;
  }
  
  @keyframes ultimate-flash {
    0% { 
      opacity: 0;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, transparent 100%);
    }
    5% { 
      opacity: 1;
      background: radial-gradient(circle, rgba(255, 215, 0, 1) 0%, rgba(255, 20, 147, 0.8) 50%, transparent 100%);
    }
    10% {
      opacity: 1;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(255, 69, 0, 0.9) 40%, transparent 100%);
    }
    15% {
      opacity: 0.7;
      background: radial-gradient(circle, rgba(255, 215, 0, 1) 0%, rgba(139, 0, 139, 0.8) 50%, transparent 100%);
    }
    20% {
      opacity: 1;
      background: radial-gradient(circle, rgba(255, 255, 255, 1) 0%, rgba(0, 206, 209, 0.9) 40%, transparent 100%);
    }
    30% {
      opacity: 0.5;
      background: radial-gradient(circle, rgba(255, 20, 147, 0.8) 0%, transparent 100%);
    }
    50% {
      opacity: 0.3;
    }
    100% { 
      opacity: 0;
    }
  }
  
  /* Ultimate skill particles - super explosive */
  .theme-ultimate .skill-particle {
    width: 20px !important;
    height: 20px !important;
    box-shadow: 
      0 0 20px currentColor,
      0 0 40px currentColor,
      0 0 60px currentColor !important;
    animation: ultimate-particle-burst 1.125s ease-out forwards !important;
  }
  
  @keyframes ultimate-particle-burst {
    0% {
      transform: translate(-50%, -50%) scale(0) rotate(0deg);
      opacity: 1;
    }
    50% {
      opacity: 1;
      transform: translate(
        calc(-50% + var(--tx) * 1.5), 
        calc(-50% + var(--ty) * 1.5)
      ) scale(2) rotate(720deg);
    }
    100% {
      opacity: 0;
      transform: translate(
        calc(-50% + var(--tx) * 2), 
        calc(-50% + var(--ty) * 2)
      ) scale(0) rotate(1080deg);
    }
  }

  /* Music Tip Animation */
  .music-tip {
    animation: music-tip-bounce 2s ease-in-out infinite;
  }
  
  .music-tip > div {
    animation: music-tip-pulse 2s ease-in-out infinite;
  }
  
  @keyframes music-tip-bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }
  
  @keyframes music-tip-pulse {
    0%, 100% {
      box-shadow: 0 4px 20px rgba(251, 191, 36, 0.5);
    }
    50% {
      box-shadow: 0 4px 30px rgba(251, 191, 36, 0.8);
    }
  }

  /* Skill Video Positioning - Desktop */
  .skill-video-ultimate {
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
  }
  
  .skill-video-normal {
    bottom: 2.5rem;
    right: 2.5rem;
  }
  
  .skill-video-player {
    width: 40vw;
    max-width: 800px;
    min-width: 500px;
  }
  
  .skill-video-ultimate .skill-video-player {
    width: 50vw;
    max-width: 960px;
    min-width: 600px;
  }

  /* Mobile Touch Optimization */
  button, .skill-btn, [role="button"] {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
  }
  
  /* Active state feedback for mobile */
  button:active, .skill-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
  }
  
  /* Prevent iOS double-tap zoom on buttons */
  button {
    touch-action: manipulation;
  }

  /* Mobile Optimizations */
  @media (max-width: 768px) {
    /* Compact header for mobile */
    .mobile-header {
      padding: 0.75rem 0.5rem !important;
      margin-bottom: 0.5rem !important;
    }
    
    /* Ensure buttons are easily tappable */
    button {
      min-height: 44px;
      padding: 0.5rem 1rem;
    }
    
    .mobile-title {
      font-size: 1.75rem !important;
      margin-bottom: 0.5rem !important;
      line-height: 1.2 !important;
    }
    
    .mobile-scores {
      gap: 0.5rem !important;
      font-size: 0.75rem !important;
    }
    
    /* Compact skills panel */
    .mobile-skills-panel {
      max-height: 70vh;
      min-height: 0;
    }
    
    .mobile-skills-list {
      gap: 0.375rem !important;
      overflow-y: auto;
      max-height: 35vh;
      scrollbar-width: thin;
      scrollbar-color: rgba(251, 191, 36, 0.5) rgba(30, 41, 59, 0.5);
    }
    
    .mobile-skills-list::-webkit-scrollbar {
      width: 6px;
    }
    
    .mobile-skills-list::-webkit-scrollbar-track {
      background: rgba(30, 41, 59, 0.5);
      border-radius: 3px;
    }
    
    .mobile-skills-list::-webkit-scrollbar-thumb {
      background: rgba(251, 191, 36, 0.5);
      border-radius: 3px;
    }
    
    .mobile-skills-list::-webkit-scrollbar-thumb:hover {
      background: rgba(251, 191, 36, 0.7);
    }
    
    .mobile-skill-btn {
      padding: 0.5rem !important;
    }
    
    /* Compact board section */
    .mobile-board-section {
      padding: 0 !important;
    }
    
    /* Smaller board on mobile - maintain square aspect ratio */
    .flipper {
      width: min(90vw, 45vh) !important;
      height: min(90vw, 45vh) !important;
      max-width: 90vw !important;
      max-height: 45vh !important;
      aspect-ratio: 1 / 1;
      margin: 0 auto !important;
    }
    
    /* Hide header decorative corners on very small screens */
    @media (max-width: 480px) {
      .header-corner {
        width: 10px !important;
        height: 10px !important;
      }
      
      .mobile-title {
        font-size: 1.5rem !important;
      }
    }
    
    /* Optimize danmaku for mobile */
    .danmaku-item {
      font-size: 0.875rem !important;
      padding: 0.375rem 0.625rem !important;
    }
    
    /* Compact energy bar */
    .energy-bar {
      height: 0.75rem !important;
    }
    
    /* Adjust particle size for mobile */
    .particle {
      width: 0.75rem !important;
      height: 0.75rem !important;
    }
    
    /* Compact music tip */
    .music-tip > div {
      font-size: 0.75rem !important;
      padding: 0.375rem 0.75rem !important;
    }
    
    /* Optimize video players for mobile - always bottom small window */
    .skill-video-ultimate,
    .skill-video-normal {
      bottom: 5rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      right: auto !important;
      inset: auto !important;
      background: transparent !important;
      backdrop-filter: none !important;
    }
    
    .skill-video-player {
      width: 70vw !important;
      max-width: 70vw !important;
      min-width: 0 !important;
      max-height: 30vh !important;
    }
    
    .skill-video-ultimate .skill-video-player {
      width: 70vw !important;
      max-width: 70vw !important;
      min-width: 0 !important;
      max-height: 30vh !important;
    }
    
    .process-video-container video {
      max-width: 90vw !important;
      max-height: 30vh !important;
    }
    
    .victory-video-player,
    .victory-celebration {
      width: 95vw !important;
      max-width: 95vw !important;
      min-width: 0 !important;
    }

    .victory-video-player {
      max-height: 50vh !important;
    }

    .victory-celebration {
      padding: 2.5rem 1.25rem !important;
      gap: 1rem !important;
    }

    .victory-celebration-title {
      font-size: 2.1rem !important;
      letter-spacing: 0.1em !important;
    }

    .victory-celebration-subtitle {
      font-size: 1rem !important;
      padding: 0.75rem 1.5rem !important;
    }

    .victory-celebration-badge {
      font-size: 1.15rem !important;
      padding: 0.6rem 1.75rem !important;
    }
    
    .victory-scroll-container {
      max-width: 95vw !important;
      min-width: 0 !important;
      height: 80px !important;
    }
    
    .victory-scroll-text {
      font-size: 1.5rem !important;
    }
    
    /* Optimize skill animation for mobile */
    .skill-animation-text {
      font-size: 12vmin !important;
    }
    
    .skill-animation-score {
      font-size: 8vmin !important;
    }
    
    .skill-animation-quote {
      font-size: 4vmin !important;
    }
    
    .skill-user-badge {
      font-size: 2.5vmin !important;
      padding: 0.5rem 1rem !important;
      top: 3% !important;
    }
    
    /* Optimize board cells for touch */
    .flipper {
      cursor: pointer;
    }
    
    /* Make toast messages more visible on mobile */
    .fixed.top-5 {
      top: 10% !important;
      font-size: 0.875rem !important;
      padding: 0.5rem 1rem !important;
    }
    
    /* Optimize footer for mobile */
    footer {
      padding: 0.5rem 0 !important;
      font-size: 0.65rem !important;
    }
  }
  
  /* Landscape mobile optimization */
  @media (max-width: 896px) and (max-height: 500px) and (orientation: landscape) {
    body {
      overflow: hidden;
    }
    
    #root {
      height: 100vh;
      overflow-y: auto;
    }
    
    .mobile-header {
      padding: 0.5rem !important;
      margin-bottom: 0.25rem !important;
    }
    
    .mobile-title {
      font-size: 1.25rem !important;
      margin-bottom: 0.25rem !important;
    }
    
    main {
      gap: 0.5rem !important;
      padding: 0 0.5rem !important;
    }
    
    .mobile-skills-panel {
      max-height: 85vh !important;
      padding: 0.5rem !important;
    }
    
    .mobile-skills-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem !important;
      overflow-y: auto;
      max-height: 60vh;
    }
    
    .mobile-skill-btn {
      flex: 1 1 calc(50% - 0.25rem);
      min-width: 120px;
      padding: 0.375rem !important;
    }
    
    .flipper {
      width: min(50vw, 70vh) !important;
      height: min(50vw, 70vh) !important;
      max-height: 70vh !important;
      max-width: 50vw !important;
      aspect-ratio: 1 / 1;
      margin: 0 auto !important;
    }
  }

</style>
</head>
  <body class="text-white font-sans" style="background: var(--app-gradient); background-size: 400% 400%; animation: gradient-shift 15s ease infinite;">
  <style>
    @keyframes gradient-shift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
  </style>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
